@using System.Collections
@using Kendo.Mvc.UI
@{
    Layout = null;
}
<div class="k-content">
    <table width="100%" border="0" cellpadding="2" cellspacing="2">
        <tr>
            <td colspan="2">
                @ViewBag.Message
            </td>
        </tr>
        <tr>
            <td> Product Category </td>
            <td>
            @(Html.Kendo().DropDownList()
                .BindTo((IEnumerable)ViewBag.ProductCategories)
                .DataValueField("ProductCategoryId")
                .DataTextField("ProductCategoryName")
                .Name("ProductCategory.ProductCategoryId")
            )
            </td>
        </tr>
        <script type="text/javascript">
    function onClick() {
        var catid = $('#ProductCategory_ProductCategoryId').val();        
        $.ajax({
            url: "../Home/UpdateCategoryBatch",
            type: "POST",
            data: { prodCatId: catid },
            success: function (result) {
                alert(result);               
                $('#textButton').closest(".k-window-content").data("kendoWindow").close();

            }
        });
    }
        </script>

        <tr>
            <td colspan="2">                
                @(Html.Kendo().Button()
                    .Name("textButton")
                    .Content("Update Product Categories")
                    .HtmlAttributes(new { type = "button"})
                    .Events(ev => ev.Click("onClick")))
            </td>
        </tr>
    </table>
</div>

